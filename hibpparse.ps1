$searchTerm = Read-Host -Prompt 'Enter the name of the breach'; $vipList = 'vip1', 'vip2'; $foundNames = (Get-Content -Path 'pwned.json' -Raw | ConvertFrom-Json).Breaches.PSObject.Properties | Where-Object { $_.Value -contains $searchTerm } | ForEach-Object { $_.Name }; $foundNames | Out-File -FilePath 'pwned.txt'; $wordCount = (Get-Content -Path 'pwned.txt' -Raw -ErrorAction SilentlyContinue | Measure-Object -Word).Words; $vipNames = $foundNames | Where-Object { $vipList -contains $_ }; $vipCount = $vipNames.Count; if ($vipCount -eq 0) { Write-Output "The script found $wordCount names in the JSON file that match '$searchTerm'. The names have been written to 'pwned.txt'. There are no VIPs in this list." } else { Write-Output "The script found $wordCount names in the JSON file that match '$searchTerm'. The names have been written to 'pwned.txt'. There are $vipCount VIPs in this list: $($vipNames -join ', ')" }
